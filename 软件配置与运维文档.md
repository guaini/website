# 软件配置与运维文档

## 配置管理

本项目使用阿里云服务器作为代码托管平台，使用 git 工具管理版本。本项目共建了一个分支，main分支用于发布稳定的主版本。

## 版本控制

| 版本 | 新增功能                                   |
| ---- | ------------------------------------------ |
| v0   | 完成前端页面，建立数据库，完成基本页面跳转 |
| v1   | 完成登录，注册，更新用户信息功能           |
| v2   | 完成显示图片的基本功能                     |
| v3   | 完成图片上传功能                           |
| v4   | 完成图片排序功能                           |
| v5   | 完成搜索功能                               |

## 持续集成

计划使用持续集成工具，例如Buddy，来进行自动化的测试。

1. 持续集成工具会先从 git 中拉取最新的代码，然后将代码编译为可执行文件。
2. 之后进行自动化测试，包括
   1. 单元测试：对各个模块功能进行测试，以检查最新的代码是否发挥了应有的功能，是否存在问题。
   2. 集成测试：测试整个系统是否能够协同工作。
   3. 性能测试：评估系统的性能，并及时发现系统存在的性能问题，给改进和优化提供方向。
3. 在测试过程中，测试结果与日志会被记录，以便于我们后续进行跟进或回溯。

## 部署和运维计划

### 部署

#### 环境配置

项目所需的python软件包已经事先在本地整理成了requirements.txt:
```shell
# requirements.txt
﻿APScheduler==3.9.1.post1
asgiref==3.5.2
Django==3.2.13
django-cors-headers==3.13.0
django-haystack==3.0b2
Pillow==9.3.0
psycopg2==2.9.5
PyJWT==1.7.1
pytz==2022.6
pytz-deprecation-shim==0.1.0.post0
six==1.16.0
sqlparse==0.4.3
tzdata==2022.7
tzlocal==4.2
```
首先需要在服务器上安装python3，接着执行`pip3 install -r requirements.txt`即可完成环境配置

#### 数据库初始化

```shell
cd /home/website                  # 进入项目文件夹
python manage.py makemigrations   # 将数据库表同步到数据库中
python manage.py migrate          # 执行同步操作
```

#### 服务器部署

```shell
nohup python manage.py runserver 0.0.0.0:8000 &  # 开启服务器并让进程在后台运行
```

### 运维计划

1. 使用阿里云服务器以满足多用户、高并发的需求。
2. 定期进行性能测试，以及时发现软件存在的性能问题，并加以解决。
3. 定期进行数据备份，以便在数据丢失或损坏的突发情况下，可以快速恢复。
4. 持续优化各项性能，如查询性能、排序性能等，以提高系统的响应速度，提升用户体验。
5. 计划增加安全功能，例如安装防火墙等，以防御恶意攻击或不安全的访问，提高系统的安全性。
